<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>main-videotape</title>
  <style>
    
  </style>
</head>

<body>
  <div id="root">
    <div id="video-frame">
      <!--?<img src="./SVG/videoframe.svg" alt="videoframe">-->
      <!--!화면에 딱 맞게 제어하려면 div로 구성하는 편이 낫다-->
      <div class="videobox-con">
        <div data-box="0">테이프 들어갈 공간있는 박스</div>
        <div data-box="1">테이프 머리</div>
      </div>
      <div>
        <div class="tape-con">
          <img src="./SVG/tapeimg.svg" alt="tapeimg" width="300px" height="300px" data-move="1">
          <img src="./SVG/reelimg.svg" alt="reelimg" width="250px" height="250px" data-move="0">
        </div>
        <div class="tape-con">
          <img src="./SVG/tapeimg.svg" alt="tapeimg" width="300px" height="300px" data-move="1">
          <img src="./SVG/reelimg.svg" alt="reelimg" width="250px" height="250px" data-move="0">
        </div>
      </div>
    </div>
  </div>
  <script>
    // <!--*variable declaration-->
    const colorObj = {
      colorBk: '#261D23',
      colorDp: '#8C4D88',
      colorGp: '#734C70',
      colorPp: '#F2B6EE',
      colorGr: '#81798C'
    }
    let hun = 100;
    // <!-- *document.body -->
    document.body.setAttribute('style',`margin: 0; padding: 0;`);
    
    // <!-- *#root -->
    const root = document.getElementById('root');
    root.setAttribute('style',`width; ${hun}vw; height: ${hun}vh;`);
    
    // <!-- *#video-frame -->
    const videoCon = document.querySelector('#video-frame');
    // <!-- *#video-frame>div:nth-child(3)-->
    const tapeCon = videoCon.lastElementChild;
    // console.log(videoCon);
    // console.log(videoFr);
    // videoFr.setAttribute('style',`width: ${hun}vmin; height: ${hun}vmin; transform: rotate(${hun/10*9}deg); position: fixed;`)
    // videoFr.style.transform = `rotate(${hun/10*9}deg)`;
    console.log(tapeCon);
    tapeCon.setAttribute('style',`width: ${hun}vw; height: ${hun}vh; border: 1px solid; display: grid; align-items: center; justify-content: space-around; position: relative; right: 4vh;`);
    
    // <!--*.tape-con-->
    console.log(tapeCon.children);
    const tapeChildCon = tapeCon.children;
    // <!--?테이프 부분을 겹쳐주려면 for()이나 .forEach()를 사용하면 중첩해서 사용해줘야 한다, 아니면 첫번째 tapeChildCon에만 적용이 됐다-->
    const tapeChild = Array.from(tapeChildCon);
    // console.log(tapeChild);
    // tapeChild.forEach((con, index) => {
    //   con.children[index].style.position = 'absolute';
    // })
    // <!--*.tape-con>img를 겹쳐줄 부분-->
    for(let x = 0; x < tapeChildCon.length; x++){
      for(let i = 0; i < tapeChildCon[x].children.length; i++){
        tapeChildCon[x].children[i].style.position = 'absolute';
        // console.log(tapeChildCon[i].children[i]);
      }
    }
    // <!--?배열이 되면 칠드런 요소가 undefined로 나온다-->
    // <!--*.tape-con-->
    const wheelTapeCon = document.getElementsByClassName('tape-con');
    console.log(wheelTapeCon);
    // const wheelTapeConArr = Array.from(wheelTapeCon);
    // console.log(wheelTapeConArr);
    // wheelTapeCon.forEach(element => element.setAttribute('style',`display: flex; align-items: center; justify-content: center;`))
    for(let i = 0; i < wheelTapeCon.length; i++){
      wheelTapeCon[i].setAttribute('style',`display: flex; align-items: center; justify-content: center;`)
    }

    // <!-- *tape 돌아가는 움직임 -->
    // dataset을 넣어뒀으니까 그 이미지 태그에만 넣기
    const wheel = [
      {transform: 'rotate(0) scale(1)'},
      {transform: 'rotate(360deg) scale(1)'}
    ];
    const wheelTime = {
      duration: 3000,
      iterations: 100,
    }
    const tape = [
      {transform: 'rotate(360deg) scale(1)'},
      {transform: 'rotate(0) scale(1)'}
    ];
    const tapeTime = {
      duration: 10000,
      iterations: 100,
    }
    // <!--?되긴 되는데 직접 지정해서 하는 방식말고 다른 방식으로 작성해보기-->
    // tapeChildCon[0].children[0].animate(wheel, wheelTime);
    // tapeChildCon[1].children[0].animate(wheel, wheelTime);
    // <!--*img.dataset = '1' === alt='wheel', img.dataset = '0' === alt='tape'-->
    const imgItem = document.getElementsByTagName('img');
    console.log(imgItem);
    const img = Array.from(imgItem);
    console.log(img);
    // <!--*wheel을 굴리면 재생되는 것처럼 움직여지도록 브라우저창에 휠 이벤트-->
    window.addEventListener('wheel',function(){
      img.forEach((img, index) => {
        // data-move='1'
        if(img.dataset.move === '1'){
          img.animate(wheel, wheelTime);
        // data-move='0'
        } else{
          img.animate(tape, tapeTime);
        }
      })
    })

    // <!--*.videobox-con-->
    const videoboxCon = document.querySelector('.videobox-con');
    // <!--*data-box: 비디오 모양 박스로 구성할 태그들-->
    const videoboxItem = videoboxCon.children;
    const videobox = Array.from(videoboxItem);
    // console.log(videoboxCon);
    // console.log(videoboxItem);
    console.log(videobox);
    // <!--*.videobox-con style-->
    videoboxCon.setAttribute('style',`width: ${hun}vw; height: ${hun}vh; position: absolute; z-index: 2; display: grid; grid-template-columns: 9fr 1fr;`);
    videobox.forEach(element => {
      if(element.dataset.box === '0'){
        element.style.border = `${hun/10*9}px solid ${colorObj.colorBk}`;
        element.textContent = '';
      } else{
        element.style.background = `${colorObj.colorGp}`;
        element.textContent = '';
      }
    })

  </script>
</body>

</html>